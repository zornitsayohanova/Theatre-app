<!doctype html>
<html lang="en" class="no-js"
      data-th-fragment="layout"
      xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link th:href="@{/css/shared.css}" rel="stylesheet"/>
    <link th:href="@{/css/search-bar-effect.css}" rel="stylesheet"/>
    <link th:href="@{/css/seatchart.css}" rel="stylesheet"/>
    <link th:href="@{/css/theatre-hall.css}" rel="stylesheet"/>
    <link th:href="@{/css/navbar.css}" rel="stylesheet"/>
    <link th:href="@{/css/results.css}" rel="stylesheet"/>
    <link th:href="@{/css/animations.css}" rel="stylesheet"/>
    <link th:href="@{/css/modal.css}" rel="stylesheet"/>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display+SC:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">

    <script type="text/javascript" src="/js/seatchart.js"></script>
    <script src="https://unpkg.com/smooth-scrollbar@latest/dist/smooth-scrollbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body class="top blue">
    <div th:replace="base-fragment::top-icons"></div>
    <main id="main-scrollbar">
        <input type="hidden" id="refresh" value="no">
        <section>
            <p class="t2 title-box f1 sm text-center">Резервации се приемат до 30 минути преди началото на представлението!</p>
            <div th:if="${play != null}" class="content column gr-gap-2">
                <div class="section column s" th:object="${play}" data-scroll>
                    <div class="c3 gr-5 gr-gap-3 align-start column">
                        <p class="t3 f1" th:text="'Билети за' + ${play.name}"></p>
                        <p class="t2 f1 sm" th:text="${play.theatreHall.hallName}"></p>
                        <div class="c3 gr-c gr-gap-2 align-start align-center">
                            <img class="icon" src="/pics/icons/calendar-icon.png">
                            <p class="t3 f1" th:text="${#dates.format(date, 'dd/MM/yyyy')}"></p>
                            <div th:if="${date.getMinutes() != 0}">
                                <p class="t3 f1" th:text="${date.getHours() + ':' + date.getMinutes()}"></p>
                            </div>
                            <div th:if="${date.getMinutes() == 0}">
                                <p class="t3 f1" th:text="${date.getHours() + ':' + date.getMinutes()} + '0'"></p>
                            </div>
                            <p id="date" hidden th:text="${#dates.format(date, 'dd-MM-yyyy')}"></p>
                        </div>
                        <p id="playId" hidden th:text="${play.id}"></p>
                        <form th:action="@{/select-play-date/{name}/{id}(name=${play.name},id=${play.id})}"
                              th:object="${play}" method="post">
                            <button class="btn f5" type="submit">Смени дата</button>
                        </form>
                        <div class="c3 gr-r gr-gap-2">
                            <p class="t3 f1 sm">Ценови категории</p>
                            <div id="legend-container"></div>
                        </div>
                    </div>
                </div>
                <div id="disabledSeats" hidden th:text="${seatingPlanDisabledSeats}"></div>
                <div id="reservedSeats" hidden th:text="${playReservedSeats}"></div>

                <script>
                    let hallRows = Number.parseInt([[${seatingPlanRows}]]);
                    let hallColumns = Number.parseInt([[${seatingPlanColumns}]]);

                    let priceCategories = []

                    function range(start, end) {
                        return Array(end - start + 1).fill().map((_, idx) => start + idx)
                    }

                    let price, fromRow, toRow, size, seats, index, colour,
                        lastPreviousSeat = 0, startIndex, endIndex
                    let colours = ["#24495f", "#1c554d", "#5e3d53"]
                </script>

                <div th:each="seatPrice, iter:${seatsPrices}">
                    <script type="text/javascript">
                        price = Number.parseFloat("[(${seatPrice.getPrice()})]")
                        fromRow = "[(${seatPrice.getFromRow()})]"
                        toRow = "[(${seatPrice.getToRow()})]"
                        if (lastPreviousSeat !== 0) {
                            lastPreviousSeat = fromRow * hallColumns
                        } else {
                            fromRow = 0
                        }
                        size = (toRow - fromRow) * hallColumns;

                        startIndex = lastPreviousSeat
                        endIndex = lastPreviousSeat + size - 1
                        seats = range(startIndex, endIndex);
                        lastPreviousSeat = size;

                        index = "[(${iter.index})]"
                        colour = colours[index]
                        priceCategories.push({
                            type: String(price),
                            backgroundColor: colour,
                            price: price,
                            selected: seats
                        })
                    </script>
                </div>
                <div class="section column gr-gap-3" data-scroll>
                    <div id="map-container" data-scroll></div>
                    <div class="c3 c2 gr-gap-3 gr-r gr-gap-3 align-center">
                        <div id="cart-container"></div>
                        <div class="c3 gr-gap-2 c-half">
                            <div class="t2 f1 sm">!!! Внимание - при успешно запазени места времето
                                за закупуването им ще се отчита с таймер. След изтичане - резервацията се анулира.

                                <br><br>* Ако резервацията е направена повече от 26 часа преди представлението -
                                местата се пазят за 24 часа.
                                <br>* Ако резервацията е направена в рамките 26 часа преди представлението -
                                местата се пазят до тридесет минути преди началото (напр. ако то е в 19 часа ->
                                запазването важи до 18:30 часа включително).
                            </div>
                            <div class="c1 c2 align-end" th:object="${play}">
                                <button id="submit" class="btn f5">
                                    Резервирай
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div th:if="${play == null}" class="content column gr-gap-2 align-center">
                <p class="t2 f1">Няма налични резултати. Моля, променете своето търсене.</p>
            </div>
        </section>
    </main>
</body>
<div th:fragment="menu" id="menu-modal">
    <div id="menu-content" class="big-menu">
        <button id="close-modal" class="close-modal">X</button>
        <div class="menu" th:width="300px" th:height="70px">
            <div class="nav">
                <ul>
                    <li class="nav-item l1">
                        <span>01</span><a class="nav-link" href="/">НАЧАЛО</a>
                    </li>
                    <li class="nav-item l1">
                        <span>02</span><a class="nav-link" href="/schedule">ПРОГРАМА</a>
                    </li>
                    <li class="nav-item l1">
                        <span>03</span><a class="nav-link"  href="/plays/search">ПОСТАНОВКИ</a>
                    </li>
                    <li class="nav-item l1">
                        <span>04</span><a class="nav-link" href="/actors/search">АКТЬОРИ</a>
                    </li>
                    <li class="nav-item l1">
                        <span>05</span><a class="nav-link" href="/theatres/search">ТЕАТРИ</a>
                    </li>
                    <li class="nav-item l1">
                        <span>06</span><a class="nav-link" href="/news">НОВИНИ</a>
                    </li>
                    <li class="nav-item l1">
                        <span>07</span><a class="nav-link" href="/most">НАЙ-</a>
                    </li>
                </ul>
            </div>
            <div class="img"></div>
        </div>
    </div>
</div>

<script>
    String.prototype.replaceAtIndex = function(_index, _newValue) {
        return this.substr(0, _index) + _newValue + this.substr(_index + _newValue.length)
    }

    $(document).ready(function() {
        Scrollbar.init(document.getElementById("main-scrollbar"), { damping: 0.1, delegateTo: document });

        let disabledSeats = document.getElementById('disabledSeats').innerHTML.split(',').map(Number);
        let reservedSeats = document.getElementById('reservedSeats').innerHTML.split(',').map(Number);

        let currentTime = new Date().toISOString().slice(5,7);
        console.log(currentTime.replaceAtIndex(13, "-"));

        let options = {
            map: {
                id: 'map-container',
                rows: hallRows,
                columns: hallColumns,
                reserved: {
                    seats: reservedSeats
                },
                disabled: {
                    seats: disabledSeats
                }
            },
            types: priceCategories,
            cart: {
                id: 'cart-container',
                width: 380,
                height: 250,
                currency: 'лв.',
            },
            legend: {
                id: 'legend-container',
            },
            assets: {
                path: "/assets",
            }
        };
        let sc = new Seatchart(options);

        let selectedSeats = [];
        sc.onChange = function (e) {
            let index = parseInt(e.current.index + 1);
            selectedSeats.push(index);
        }

        $("#submit").click(function () {
            let date = document.getElementById('date').innerHTML;
            let currentDateAndTime = new Date();
            let currentDate = currentDateAndTime.getFullYear() + '-'
                + new Date().toISOString().slice(5,7) + '-'
                + currentDateAndTime.getDate() + ' ';

            let currentTime = currentDateAndTime.toLocaleTimeString().slice(0,8).replaceAll(".", "-");

            let playId = document.getElementById('playId').innerHTML;
            selectedSeats = selectedSeats.join("-").toString();
            if(selectedSeats === "") {
                selectedSeats = "none"
            }
            location.href = '/reserved-seats/' + playId + "/" + selectedSeats + "/" + date + "/" + currentDate + currentTime;
        });
    });
</script>
<script>
    $(document).ready(function() {
        var modal = $('#menu-modal');

        $('.show-menu').click(function () {
            modal.show();
            $('#menu-content').css("display", "block");
            $('#menu-content').css("animation", "wipe-down");
            $('#menu-content').css("animation-iteration-count", "1");
            $('#menu-content').css("animation-timing-function", "ease-in-out");
            $('#menu-content').css("animation-duration", "1.1s");
            $('#menu-content').css("animation-fill-mode", "forwards");
        });

        $('#close-modal').on('click', function () {
            $('#menu-content').delay(100).fadeOut();
        });
    });
</script>
<script>
    (function () {
        window.onpageshow = function(event) {
            if (event.persisted) {
                window.location.reload();
            }
        };
    })();

    /*$.ajax({
        type: "GET",
        url: "/reserve-seats",
        data: JSON.stringify(seatData),
        contentType: "application/json; charset=utf-8",
        success: function () {
            location.href = '/save-reserved-seats/' + playId + "/" + selectedSeats + "/" + "05-05-2021"//document.getElementById('date').innerHTML;  //"/" + year + "-" + "0" + month + "-" + '0' + day;
           // location.href = '/';
        },
        error: function (data) {
            console.log(data)
        }
    });*/



  //  $(document).ready(function() {
    /*    let disabledSeats = document.getElementById('disabledSeats').innerHTML.split(',').map(Number);
        let reservedSeats = document.getElementById('reservedSeats').innerHTML.split(',').map(Number);

        let options = {
            map: {
                id: 'map-container',
                rows: 12,
                columns: 13,
                reserved: {
                    seats: reservedSeats
                },
                disabled: {
                    seats: disabledSeats
                }
            },
            types: [
                {type: "regular", backgroundColor: "#4c6674", price: 10, selected: []},
                {type: "reduced", backgroundColor: "#287233", price: 7.5, selected: []}
            ],
             cart: {
                id: 'cart-container',
                width: 280,
                height: 250,
                currency: '£',
            },
            legend: {
                id: 'legend-container',
            },
            assets: {
                path: "/assets",
            }
        };
        let selectedSeats = [];
        let sc = new Seatchart(options);

        sc.onChange = function(e) {
            //selectedSeats.push({index: e.index})//, name: e.name, price: e.price})
            console.log(e.current.index)
        }*/
   // });
  //})();

       // }));
      /*  $("#submit").click(function () {
                console.log(selectedSeats);
                /*   let selectedSeats = document.getElementsByClassName("saved");

                   let selectedSeatsIds = [];
                   for (let i = 0; i < reservedSeats.length; i++) {
                       let row = parseInt(selectedSeats[i].id.charAt(0));
                       let col = parseInt(selectedSeats[i].id.charAt(2));
                       selectedSeatsIds[i] = row * 13 + col;
                   }

                $.ajax({
                    type: "POST",
                    url: "/reserve-seats",
                    data: JSON.stringify(selectedSeats),
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        location.href = '/';
                    },
                    error: function (data) {
                        console.log(data)
                    }
                });
            });
      //  });*/


    /* $(".sc-seat").click(function (e) {
          let selectedSeats = [];

          selectedSeats.push({index: e.index, name: e.name, price: e.price})
          console.log(selectedSeats);
      })*/
</script>
</html>
<!--

    //  const button = document.getElementById('send');

       // button.addEventListener('click', async _ => {
         /*   try {
                const response = await fetch('/pla', {
                    method: 'post',
                    body: {
                        type: "POST",
                        url: "/pla",
                        data: {
                            myArray: a
                        },
                    }
                });
                console.log(a);
                console.log('Completed!', response);
            } catch(err) {
                console.error(`Error: ${err}`);
            }
        });*/



<body>
<div class="content">
    <div id="map-container"><div class="sc-map-container sc-container-column sc-right">
        <div class="sc-front sc-margin-bottom" style="width: 414px;">Front</div>
        <div class="sc-container-column sc-right"><div class="sc-column-index">
            <div class="sc-index">1</div><div class="sc-index">2</div>
            <div class="sc-index">3</div><div class="sc-index">4</div>
            <div class="sc-seat blank"></div><div class="sc-index">5</div>
            <div class="sc-index">6</div><div class="sc-index">7</div><div class="sc-index">8</div></div><div class="sc-container-row"><div class="sc-row-index"><div class="sc-index">A</div><div class="sc-index">B</div><div class="sc-index">C</div><div class="sc-index">D</div><div class="sc-seat blank"></div><div class="sc-index">E</div><div class="sc-index">F</div>
        <div class="sc-index">G</div><div class="sc-index">H</div></div><div class="sc-map" style="width: 414px;"><div class="sc-map-row"><div class="sc-seat blank" id="0_0">A1</div><div class="sc-seat unavailable" id="0_1">A2</div><div class="sc-seat unavailable" id="0_2">A3</div><div class="sc-seat unavailable" id="0_3">A4</div><div class="sc-seat blank" id="0_4"></div><div class="sc-seat unavailable" id="0_5">A5</div><div class="sc-seat unavailable" id="0_6">A6</div><div class="sc-seat unavailable" id="0_7">A7</div><div class="sc-seat blank" id="0_8">A8</div></div><div class="sc-map-row"><div class="sc-seat unavailable" id="1_0">B1</div><div class="sc-seat unavailable" id="1_1">B2</div><div class="sc-seat unavailable" id="1_2">B3</div><div class="sc-seat unavailable" id="1_3">B4</div><div class="sc-seat blank" id="1_4"></div><div class="sc-seat unavailable" id="1_5">B5</div><div class="sc-seat unavailable" id="1_6">B6</div><div class="sc-seat unavailable" id="1_7">B7</div><div class="sc-seat unavailable" id="1_8">B8</div></div><div class="sc-map-row"><div class="sc-seat unavailable" id="2_0">C1</div><div class="sc-seat unavailable" id="2_1">C2</div><div class="sc-seat unavailable" id="2_2">C3</div><div class="sc-seat unavailable" id="2_3">C4</div><div class="sc-seat blank" id="2_4"></div><div class="sc-seat regular clicked" id="2_5" style="background-color: rgb(0, 108, 128);">C5</div><div class="sc-seat regular clicked" id="2_6" style="background-color: rgb(0, 108, 128);">C6</div><div class="sc-seat clicked reduced" id="2_7" style="background-color: rgb(40, 114, 51);">C7</div><div class="sc-seat clicked reduced" id="2_8" style="background-color: rgb(40, 114, 51);">C8</div></div><div class="sc-map-row"><div class="sc-seat available" id="3_0">D1</div><div class="sc-seat available" id="3_1">D2</div><div class="sc-seat available" id="3_2">D3</div><div class="sc-seat available" id="3_3">D4</div><div class="sc-seat blank" id="3_4"></div><div class="sc-seat available" id="3_5">D5</div><div class="sc-seat available" id="3_6">D6</div><div class="sc-seat available" id="3_7">D7</div><div class="sc-seat available" id="3_8">D8</div></div><div class="sc-map-row"></div><div class="sc-map-row"><div class="sc-seat available" id="5_0">E1</div><div class="sc-seat available" id="5_1">E2</div><div class="sc-seat available" id="5_2">E3</div><div class="sc-seat available" id="5_3">E4</div><div class="sc-seat blank" id="5_4"></div><div class="sc-seat available" id="5_5">E5</div><div class="sc-seat available" id="5_6">E6</div><div class="sc-seat available" id="5_7">E7</div><div class="sc-seat available" id="5_8">E8</div></div><div class="sc-map-row"><div class="sc-seat available" id="6_0">F1</div><div class="sc-seat available" id="6_1">F2</div><div class="sc-seat available" id="6_2">F3</div><div class="sc-seat available" id="6_3">F4</div><div class="sc-seat blank" id="6_4"></div><div class="sc-seat available" id="6_5">F5</div><div class="sc-seat available" id="6_6">F6</div><div class="sc-seat available" id="6_7">F7</div><div class="sc-seat available" id="6_8">F8</div></div><div class="sc-map-row"><div class="sc-seat available" id="7_0">G1</div><div class="sc-seat available" id="7_1">G2</div><div class="sc-seat available" id="7_2">G3</div><div class="sc-seat available" id="7_3">G4</div><div class="sc-seat blank" id="7_4"></div><div class="sc-seat available" id="7_5">G5</div><div class="sc-seat available" id="7_6">G6</div><div class="sc-seat available" id="7_7">G7</div><div class="sc-seat available" id="7_8">G8</div></div><div class="sc-map-row"><div class="sc-seat available" id="8_0">H1</div><div class="sc-seat available" id="8_1">H2</div><div class="sc-seat available" id="8_2">H3</div><div class="sc-seat available" id="8_3">H4</div><div class="sc-seat blank" id="8_4"></div><div class="sc-seat available" id="8_5">H5</div><div class="sc-seat available" id="8_6">H6</div><div class="sc-seat available" id="8_7">H7</div><div class="sc-seat available" id="8_8">H8</div></div></div></div></div></div></div>

    <div class="right">
        <div id="cart-container"><div class="sc-cart-container sc-container-column">
            <div class="sc-title"><img src="./seatchart/assets/icons/shoppingcart.svg" alt="Shopping cart icon.">
                <h3 class="">Your Cart</h3><h3>(4)</h3></div><div class="sc-cart" style="width: 280px; height: 250px;">
            <table class="sc-cart-items"><tr id="item-2_8"><td class="sc-ticket-container"><div class="sc-ticket" style="background-color: rgb(40, 114, 51);"><div class="sc-ticket-stripes"></div><div class="sc-cart-seat-name">C8</div><div class="sc-cart-seat-type">Reduced</div><div class="sc-ticket-stripes"></div></div></td><td>£7.50</td><td><div class="sc-cart-delete"><img src="./seatchart/assets/icons/bin.svg"></div></td></tr><tr id="item-2_7"><td class="sc-ticket-container"><div class="sc-ticket" style="background-color: rgb(40, 114, 51);"><div class="sc-ticket-stripes"></div><div class="sc-cart-seat-name">C7</div><div class="sc-cart-seat-type">Reduced</div><div class="sc-ticket-stripes"></div></div></td><td>£7.50</td><td><div class="sc-cart-delete"><img src="./seatchart/assets/icons/bin.svg"></div></td></tr><tr id="item-2_5"><td class="sc-ticket-container"><div class="sc-ticket" style="background-color: rgb(0, 108, 128);"><div class="sc-ticket-stripes"></div><div class="sc-cart-seat-name">C5</div><div class="sc-cart-seat-type">Regular</div><div class="sc-ticket-stripes"></div></div></td><td>£10.00</td><td><div class="sc-cart-delete"><img src="./seatchart/assets/icons/bin.svg"></div></td></tr><tr id="item-2_6"><td class="sc-ticket-container"><div class="sc-ticket" style="background-color: rgb(0, 108, 128);"><div class="sc-ticket-stripes"></div><div class="sc-cart-seat-name">C6</div><div class="sc-cart-seat-type">Regular</div><div class="sc-ticket-stripes"></div></div></td><td>£10.00</td><td><div class="sc-cart-delete"><img src="./seatchart/assets/icons/bin.svg"></div></td></tr></table></div><div><h5 class="sc-small-title sc-cart-total">Total: £35.00</h5><div class="sc-cart-delete all"><img src="./seatchart/assets/icons/bin.svg"><p>All</p></div></div></div></div>
        <div id="legend-container"><div class="sc-legend-container sc-container-column"><h3 class="sc-title">Legend</h3><ul class="sc-legend"><li class="sc-legend-item"><div class="sc-seat legend-style  clicked" style="background-color: rgb(0, 108, 128);"></div><p class="sc-legend-description">Regular £10.00</p></li><li class="sc-legend-item"><div class="sc-seat legend-style  clicked" style="background-color: rgb(40, 114, 51);"></div><p class="sc-legend-description">Reduced £7.50</p></li><li class="sc-legend-item"><div class="sc-seat legend-style unavailable"></div><p class="sc-legend-description">Already booked</p></li></ul></div></div>
    </div>
</div>

<script type="text/javascript" src="/js/seatchart.js"></script>
<script>
    var options = {
        // Reserved and disabled seats are indexed
        // from left to right by starting from 0.
        // Given the seatmap as a 2D array and an index [R, C]
        // the following values can obtained as follow:
        // I = columns * R + C
        map: {
            id: 'map-container',
            rows: 9,
            columns: 9,
            // e.g. Reserved Seat [Row: 1, Col: 2] = 7 * 1 + 2 = 9
            reserved: {
                seats: [1, 2, 3, 5, 6, 7, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21],
            },
            disabled: {
                seats: [0, 8],
                rows: [4],
                columns: [4]
            }
        },
        types: [
            { type: "regular", backgroundColor: "#006c80", price: 10, selected: [23, 24] },
            { type: "reduced", backgroundColor: "#287233", price: 7.5, selected: [25, 26] }
        ],
        cart: {
            id: 'cart-container',
            width: 280,
            height: 250,
            currency: '£',
        },
        legend: {
            id: 'legend-container',
        },
        assets: {
            path: "/assets",
        }
    };

    var sc = new Seatchart(options);
</script>
</body>
-->
<!--
<head>
    <th:block th:include="base-fragment::head"></th:block>
    <link th:href="@{/css/result.css}" rel="stylesheet"/>
    <link th:href="@{/css/theatre-hall.css}" rel="stylesheet"/>
    <link th:href="@{/css/background-zoom-effect.css}" rel="stylesheet"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:200" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:100" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link th:href="@{/css/seatchart.css}" rel="stylesheet"/>
    <script type="text/javascript" src="/js/seatchart.js"></script>
</head>
<body data-scroll-container>
    <div id="map-container"></div>
    <div id="legend-container"></div>
    <div id="shoppingCart-container"></div>


    <div data-scroll-section th:object="${seats}">
        <button id="send" class="btn" style="background-color: #0a0a0a">Send</button>
    </div>-->
<!--<div>
    <div th:replace="base-fragment::top-icons"></div>
    <header th:replace="base-fragment::header"></header>

    <div data-scroll-section th:object="${play}">
            <div class="content">
                <p class="t1" th:text="${play.theatre.theatreName}"></p>
                <div class="c4">
                    <div data-scroll="" class="c3">
                        <div class="c4" data-scroll="">
                            <div data-scroll>
                                <div data-scroll class="nz">
                                    <div data-scroll class="seats-container">
                                        <p class="play-name" th:text="'Билети за ,,' + ${play.name} + '&quot;'"></p>
                                        <p class="play-name" th:text="Дати"></p>
                                        <div data-scroll th:each="d: ${playDates}">
                                            <div class="form-control" th:text="${#dates.format(d, 'dd/MM/yyyy')}"></div>
                                        </div>
                                        <p class="play-name">Моля, изберете дата</p>
                                        <div class="c4">
                                            <form data-th-action="@{/play/date/{id}(id=${play.id})}"  method="post">
                                                <input type="date" name="date" class="form-control">
                                                <button class="btn">Избери</button>
                                            </form>
                                        </div>
                                        <div th:if="${date != null}">
                                            <p class="play-name" th:text="'Свободни места за: ' + ${#dates.format(date, 'dd/MM/yyyy')}"></p>
                                            <div class="c4">
                                                <div class="c6">
                                                    <div data-scroll th:each="seat: ${seats}">
                                                        <div class="freeSeat" th:text="${seat.getSeat().seatIdentifier}"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group c3">
                                                <div data-scroll="">
                                                    <button data-toggle="dropdown"
                                                            class="btn btn-default dropdown-toggle" type="button">
                                                        <span class="caret"></span>
                                                        Място
                                                    </button>
                                                    <ul role="menu" class="dropdown-menu">
                                                        <input type="checkbox" name="roles"
                                                               th:each="seat: ${seats}"
                                                               th:text="'място: ' + ' ' + ${seat.getSeat().seatIdentifier} + ' (ред: ' + ${seat.getSeat().rowIdentifier} + ')'"
                                                               th:value="${seat.id}">
                                                               th:field="*{seats}"-->
<!-- </ul>
                                                </div>
                                                <button class="btn save" type="button">Резервирай</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="c7" style="justify-content: flex-start; flex-direction: column">
                                <p>от 1 до 4 ред - <b>15лв</b></p>
                                <p>от 4 до 8 ред - <b>12лв.</b></p>
                                <p>от 8 до 12 ред - <b>10лв.</b></p>
                            </div>
                        </div>
                        <div class="c5" data-scroll th:data th:object="${theatre}">
                            <img th:src="${theatre.seatsScheme.path.substring(1, theatre.seatsScheme.path.length() - 1)}">
                        </div>
                    </div>
                </div>
           </div>
    </div>
</div>

        <div class="c4" data-scroll="">
                    <div class="c3" data-scroll>
                        <div data-scroll class="nz">
                            <div data-scroll class="seats-container">
                                <p class="t1">,,Малък градски театър зад канала" </p>
                                <p class="play-name">Моля, изберете дата
                                    <input type="date">
                                </p>
                                <p class="play-name">Свободни места за 22/03/2021: </p>
                                <div class="c3">
                                    <div class="c6">
                                        <div data-scroll th:each="seat: ${playFreeSeats}">
                                            <div class="freeSeat" th:text="${seat.getSeat().numberOfSeat}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group c4">
                                        <button data-toggle="dropdown"
                                                class="btn btn-default dropdown-toggle" type="button">
                                            <span class="caret"></span>
                                            Избери
                                        </button>
                                        <ul role="menu" class="dropdown-menu">
                                            <input type="checkbox" name="roles"
                                                   th:each="seat: ${playFreeSeats}"
                                                   th:text="'място: ' + ' ' + ${seat.getSeat().numberOfSeat} + ' (ред: ' + ${seat.getSeat().numberOfRow} + ')'"
                                                   th:value="${seat.id}"
                                                   th:field="*{playFreeSeats}"
                                            />
                                        </ul>
                                        <button class="btn save" type="button">Резервирай</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                 </div>





<div class="content" data-scroll="">
    <div data-scroll-section>
        <div class="section">
            <div class="c3" data-scroll="">
                <div class="c5" data-scroll="">
                    <div data-scroll class="nz">
                        <img data-scroll src="/theatres/зад-канала-схема.png">
                    </div>
                </div>
                <div class="c8" data-scroll>
                    <div data-scroll class="nz">
                        <p>Свободни места: </p>
                        <div data-scroll class="seats-container">
                            <div data-scroll th:each="seat: ${rowsWithSeats}">
                                <div th:if="${seat.isFree == 0}" class="freeSeat" th:text="${seat.numberOfSeat}">
                                </div>
                            </div>
                            <p>
                                от 1 до 4 ред - <b>15лв.</b><br><br>
                                от 4 до 8 ред - <b>12лв.</b><br><br>
                                от 8 до 12 ред - <b>10лв.</b><br><br>
                            </p>
                            <div class="form-group">
                                <button data-toggle="dropdown"
                                        class="btn btn-default dropdown-toggle" type="button">
                                    <span class="caret"></span>
                                    Места
                                </button>
                                <ul role="menu" class="dropdown-menu">
                                    <input type="checkbox" name="roles"
                                           th:each="seat: ${rowsWithSeats}"
                                           th:text="'ред: ' + ${seat.numberOfRow} + ' ' + 'място: ' + ' ' + ${seat.numberOfSeat}"
                                           th:value="${seat.id}"
                                           th:field="*{rowsWithSeats}"
                                    />
                                </ul>
                                <button class="btn" type="button">Резервирай</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>
-->

<!--
<script>
 //   var playSeats = Array.from(document.getElementById("play").innerHTML);
   //function sen() {
       /*  let reservedSeats = document.getElementsByClassName("clicked");
       let s = [];
       for (let i = 0; i < reservedSeats.length; i++) {
           s[i] = reservedSeats[i].id;
       }
       console.log(s)

     console.log(`123`);*/


       /*  $.ajax({
         type: "POST",
         url: "/pla",
         data :  s,
         dataType: "json",
         contentType: "application/json; charset=utf-8",
        // success: function(data){
          //   alert(data.Result);
       //  }
     });
    }*/
 /*$('#send').click(function() {
     let a = [1, 2 ,3]
       $.ajax({
           type: "POST",
           url: "/pla",
           data: {
               myArray: a //notice that "myArray" matches the value for @RequestParam
                          //on the Java side
           },
           success: function (response) {
               // do something ...
           },
           error: function (e) {
               alert('Error: ' + e);
           }
       });
 });*/

  //  var t = document.getElementsByClassName("clicked")[];
</script>

-->
<!--
</body>
<script>
    var options = {
        // Reserved and disabled seats are indexed
        // from left to right by starting from 0.
        // Given the seatmap as a 2D array and an index [R, C]
        // the following values can obtained as follow:
        // I = columns * R + C
        map: {
            id: 'map-container',
            rows: 12,
            columns: 13,
            // e.g. Reserved Seat [Row: 1, Col: 2] = 7 * 1 + 2 = 9
            reserved: {
                seats: [[${seats}]]
                //  seats: [1, 2, 3, 5, 6, 7, 9, 10, 14, 15, 16, 17, 18, 19, 20, 21],
            },
            disabled: {
                // seats: [[${seats}]]
                // rows: [0],
                //columns: [12]
            }
        },
        types: [
            // { type: "regular", backgroundColor: "#006c80", price: 10, selected: [[${seats}]] },
            { type: "reduced", backgroundColor: "#287233", price: 7.5, selected: [25, 26] }
        ],
        cart: {
            id: 'cart-container',
            width: 280,
            height: 250,
            currency: '£',
        },
        legend: {
            id: 'legend-container',
        },
        assets: {
            path: "/assets",
        }
    };
    var sc = new Seatchart(options);
</script>
</html>
-->
<!--
<body data-scroll-container>
    <div id="map-container"></div>
    <div id="legend-container"></div>
    <div id="shoppingCart-container"></div>

    <div th:object="${play}">

    </div>
<div>
    <div th:replace="base-fragment::top-icons"></div>
    <header th:replace="base-fragment::header"></header>

    <div data-scroll-section th:object="${play}">
            <div class="content">
                <p class="t1" th:text="${play.theatre.theatreName}"></p>
                <div class="c4">
                    <div data-scroll="" class="c3">
                        <div class="c4" data-scroll="">
                            <div data-scroll>
                                <div data-scroll class="nz">
                                    <div data-scroll class="seats-container">
                                        <p class="play-name" th:text="'Билети за ,,' + ${play.name} + '&quot;'"></p>
                                        <p class="play-name" th:text="Дати"></p>
                                        <div data-scroll th:each="d: ${playDates}">
                                            <div class="form-control" th:text="${#dates.format(d, 'dd/MM/yyyy')}"></div>
                                        </div>
                                        <p class="play-name">Моля, изберете дата</p>
                                        <div class="c4">
                                            <form data-th-action="@{/play/date/{id}(id=${play.id})}"  method="post">
                                                <input type="date" name="date" class="form-control">
                                                <button class="btn">Избери</button>
                                            </form>
                                        </div>
                                        <div th:if="${date != null}">
                                            <p class="play-name" th:text="'Свободни места за: ' + ${#dates.format(date, 'dd/MM/yyyy')}"></p>
                                            <div class="c4">
                                                <div class="c6">
                                                    <div data-scroll th:each="seat: ${seats}">
                                                        <div class="freeSeat" th:text="${seat.getSeat().seatIdentifier}"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group c3">
                                                <div data-scroll="">
                                                    <button data-toggle="dropdown"
                                                            class="btn btn-default dropdown-toggle" type="button">
                                                        <span class="caret"></span>
                                                        Място
                                                    </button>
                                                    <ul role="menu" class="dropdown-menu">
                                                        <input type="checkbox" name="roles"
                                                               th:each="seat: ${seats}"
                                                               th:text="'място: ' + ' ' + ${seat.getSeat().seatIdentifier} + ' (ред: ' + ${seat.getSeat().rowIdentifier} + ')'"
                                                               th:value="${seat.id}">
                                                               th:field="*{seats}"-->
<!-- </ul>
                                                </div>
                                                <button class="btn save" type="button">Резервирай</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="c7" style="justify-content: flex-start; flex-direction: column">
                                <p>от 1 до 4 ред - <b>15лв</b></p>
                                <p>от 4 до 8 ред - <b>12лв.</b></p>
                                <p>от 8 до 12 ред - <b>10лв.</b></p>
                            </div>
                        </div>
                        <div class="c5" data-scroll th:data th:object="${theatre}">
                            <img th:src="${theatre.seatsScheme.path.substring(1, theatre.seatsScheme.path.length() - 1)}">
                        </div>
                    </div>
                </div>
           </div>
    </div>
</div>

        <div class="c4" data-scroll="">
                    <div class="c3" data-scroll>
                        <div data-scroll class="nz">
                            <div data-scroll class="seats-container">
                                <p class="t1">,,Малък градски театър зад канала" </p>
                                <p class="play-name">Моля, изберете дата
                                    <input type="date">
                                </p>
                                <p class="play-name">Свободни места за 22/03/2021: </p>
                                <div class="c3">
                                    <div class="c6">
                                        <div data-scroll th:each="seat: ${playFreeSeats}">
                                            <div class="freeSeat" th:text="${seat.getSeat().numberOfSeat}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group c4">
                                        <button data-toggle="dropdown"
                                                class="btn btn-default dropdown-toggle" type="button">
                                            <span class="caret"></span>
                                            Избери
                                        </button>
                                        <ul role="menu" class="dropdown-menu">
                                            <input type="checkbox" name="roles"
                                                   th:each="seat: ${playFreeSeats}"
                                                   th:text="'място: ' + ' ' + ${seat.getSeat().numberOfSeat} + ' (ред: ' + ${seat.getSeat().numberOfRow} + ')'"
                                                   th:value="${seat.id}"
                                                   th:field="*{playFreeSeats}"
                                            />
                                        </ul>
                                        <button class="btn save" type="button">Резервирай</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                 </div>





<div class="content" data-scroll="">
    <div data-scroll-section>
        <div class="section">
            <div class="c3" data-scroll="">
                <div class="c5" data-scroll="">
                    <div data-scroll class="nz">
                        <img data-scroll src="/theatres/зад-канала-схема.png">
                    </div>
                </div>
                <div class="c8" data-scroll>
                    <div data-scroll class="nz">
                        <p>Свободни места: </p>
                        <div data-scroll class="seats-container">
                            <div data-scroll th:each="seat: ${rowsWithSeats}">
                                <div th:if="${seat.isFree == 0}" class="freeSeat" th:text="${seat.numberOfSeat}">
                                </div>
                            </div>
                            <p>
                                от 1 до 4 ред - <b>15лв.</b><br><br>
                                от 4 до 8 ред - <b>12лв.</b><br><br>
                                от 8 до 12 ред - <b>10лв.</b><br><br>
                            </p>
                            <div class="form-group">
                                <button data-toggle="dropdown"
                                        class="btn btn-default dropdown-toggle" type="button">
                                    <span class="caret"></span>
                                    Места
                                </button>
                                <ul role="menu" class="dropdown-menu">
                                    <input type="checkbox" name="roles"
                                           th:each="seat: ${rowsWithSeats}"
                                           th:text="'ред: ' + ${seat.numberOfRow} + ' ' + 'място: ' + ' ' + ${seat.numberOfSeat}"
                                           th:value="${seat.id}"
                                           th:field="*{rowsWithSeats}"
                                    />
                                </ul>
                                <button class="btn" type="button">Резервирай</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>
-->

<!--
<script th:replace="base-fragment::script"></script>
<script>
    var playSeats = Array.from(document.getElementById("play").innerHTML);
    var options = {
        // Reserved and disabled seats are indexed
        // from left to right by starting from 0.
        // Given the seatmap as a 2D array and an index [R, C]
        // the following values can obtained as follow:
        // I = columns * R + C
        map: {
            id: 'map-container',
            rows: 12,
            columns: 13,
            // e.g. Reserved Seat [Row: 1, Col: 2] = 7 * 1 + 2 = 9
            reserved: {
                seats: [[${seats}]]
                //  seats: [1, 2, 3, 5, 6, 7, 9, 10, 14, 15, 16, 17, 18, 19, 20, 21],
            },
            disabled: {
                // seats: [[${seats}]]
                // rows: [0],
                //columns: [12]
            }
        },
        types: [
            // { type: "regular", backgroundColor: "#006c80", price: 10, selected: [[${seats}]] },
            { type: "reduced", backgroundColor: "#287233", price: 7.5, selected: [25, 26] }
        ],
        cart: {
            id: 'cart-container',
            width: 280,
            height: 250,
            currency: '£',
        },
        legend: {
            id: 'legend-container',
        },
        assets: {
            path: "./assets",
        }
    };
    var sc = new Seatchart(options);

    let reservedSeats = document.getElementsByClassName("clicked");
    let s;
    for (let i in reservedSeats) {
        s[i] = reservedSeats[i].id.charAt(2)
    }

    $('#send').click(function() {
        $.ajax({
            url: "/Home/SaveList",
            type: "POST",
            data : {
                myArray: a
            },
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function(data){
                alert(data.Result);
            }
        });
    })
    // var reservedSeats = document.getElementsByClassName("clicked")[0].id.charAt(2);
</script>
</body>
-->